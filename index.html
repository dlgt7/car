<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>汽车隐藏编码查询工具</title>
    <style>
        body { font-family: "Microsoft YaHei", Arial, sans-serif; margin: 20px; background: #f9f9f9; color: #333; }
        h1 { text-align: center; color: #2c3e50; }
        .container { max-width: 800px; margin: 0 auto; background: white; padding: 20px; border-radius: 10px; box-shadow: 0 0 15px rgba(0,0,0,0.1); }
        label { display: block; margin: 15px 0 5px; font-weight: bold; }
        input, select { width: 100%; padding: 10px; font-size: 16px; border: 1px solid #ccc; border-radius: 5px; }
        button { margin-top: 15px; padding: 12px 20px; background: #3498db; color: white; border: none; border-radius: 5px; cursor: pointer; font-size: 16px; }
        button:hover { background: #2980b9; }
        #result { margin-top: 20px; padding: 15px; background: #e8f4fd; border-radius: 5px; white-space: pre-wrap; }
        .tip { font-size: 14px; color: #666; margin-top: 10px; }
    </style>
</head>
<body>
    <div class="container">
        <h1>汽车隐藏编码查询工具</h1>
        <p style="text-align:center; color:#666;">输入编码后点击“查询”，工具会自动解读（支持 VIN、DOT 玻璃/轮胎/灯、安全带、蓄电池等常见代码）</p>

        <label for="code">输入编码（不区分大小写）：</label>
        <input type="text" id="code" placeholder="例如：1HGCM82633A004352 或 DOT 2523 或 2523 等">

        <label for="type">编码类型（可自动识别，也可手动选择）：</label>
        <select id="type">
            <option value="auto">自动识别</option>
            <option value="vin">VIN（机架号，17位）</option>
            <option value="dot_tire">DOT 轮胎号（后四位如 2523）</option>
            <option value="dot_glass">DOT 玻璃/灯号（小圆点或年月码）</option>
            <option value="engine">发动机号（带排量/功率版）</option>
            <option value="trans">变速箱号</option>
            <option value="battery">蓄电池号（年月+流水）</option>
            <option value="belt">安全带号</option>
            <option value="other">其他（通用解释）</option>
        </select>

        <button onclick="decode()">查询</button>

        <div id="result"></div>

        <div class="tip">
            <strong>常查代码优先显示：</strong> VIN → 轮胎DOT → 玻璃DOT → 发动机/变速箱 → 安全带/气囊 → 蓄电池/散热器 → 钣金冲压等<br>
            提示：事故车/调表车常出现“部件日期晚于整车”或“零件号不匹配”。
        </div>
    </div>

    <script>
        function decode() {
            let input = document.getElementById('code').value.trim().toUpperCase();
            let type = document.getElementById('type').value;
            let result = document.getElementById('result');
            result.innerHTML = '';

            if (!input) {
                result.innerHTML = '<span style="color:red;">请先输入编码！</span>';
                return;
            }

            // 自动识别
            if (type === 'auto') {
                if (input.length === 17) type = 'vin';
                else if (input.match(/^\d{4}$/) || input.match(/^\d{4}\s*$/)) type = 'dot_tire';
                else if (input.includes('.') || input.match(/^\d{1,2}$/) || input.match(/DOT/i)) type = 'dot_glass';
                else if (input.match(/^[A-Z]{2}\d{4}/) || input.match(/EA\d{3}/)) type = 'engine';
                else if (input.match(/MQ\d{3}/) || input.match(/6R\d{2}/)) type = 'trans';
                else type = 'other';
            }

            let output = '<strong>查询结果：</strong><br>';

            switch (type) {
                case 'vin':
                    if (input.length !== 17) {
                        output += 'VIN 必须是 17 位！';
                        break;
                    }
                    let wmi = input.substring(0,3);
                    let vds = input.substring(3,9);
                    let check = input[8];
                    let year = input[9];
                    let plant = input[10];
                    let serial = input.substring(11);

                    let yearMap = { A:2010, B:2011, C:2012, D:2013, E:2014, F:2015, G:2016, H:2017, J:2018, K:2019, L:2020, M:2021, N:2022, P:2023, R:2024, S:2025, T:2026, V:2027, W:2028, X:2029, Y:2030, 1:2001, 2:2002, 3:2003, 4:2004, 5:2005, 6:2006, 7:2007, 8:2008, 9:2009, 'A':1980, 'B':1981, 'C':1982, 'D':1983, 'E':1984, 'F':1985, 'G':1986, 'H':1987, 'J':1988, 'K':1989, 'L':1990, 'M':1991, 'N':1992, 'P':1993, 'R':1994, 'S':1995, 'T':1996, 'V':1997, 'W':1998, 'X':1999, 'Y':2000 };
                    let y = yearMap[year] || '未知';
                    output += `产地+厂家：${wmi}<br>车型/发动机/车身：${vds}<br>校验位：${check}<br>生产年份：${y} 年<br>装配厂：${plant}<br>流水号：${serial}`;
                    break;

                case 'dot_tire':
                    if (input.length !== 4) {
                        output += '轮胎 DOT 后四位应为 4 位数字（如 2523）';
                        break;
                    }
                    let week = parseInt(input.substring(0,2));
                    let yr = parseInt(input.substring(2));
                    let year = yr < 25 ? 2000 + yr : 1900 + yr; // 假设 00-24 为 2000-2024
                    output += `生产时间：${year} 年 第 ${week} 周<br>（可上 NHTSA 官网用前 2-3 位查工厂）`;
                    break;

                case 'dot_glass':
                    output += '玻璃/灯 DOT 日期规则（小圆点法）：<br>数字 = 年份最后一位<br>点在左：月份 = 7 - 点数<br>点在右：月份 = 13 - 点数<br>例如：7 点在左 + 5 → 7-7=0（10月），5 → 2015 年 10 月';
                    break;

                case 'engine':
                    output += '发动机号通常包含：厂家 + 排量 + 功率版本 + 序列号<br>例如宝马 N 系、大众 EA 系可区分高/低功率版';
                    break;

                case 'trans':
                    output += '变速箱号通常包含型号（如 MQ250、6R80）+ 生产周/年 + 序列号<br>用于判断是否翻新或索赔';
                    break;

                case 'battery':
                    output += '蓄电池号通常为 年月 + 流水号<br>例如 2023 年 6 月生产 → 可能显示 2306XX<br>如果车辆表显 2024 年但电池 2022 年生产，要警惕调表';
                    break;

                case 'belt':
                    output += '安全带号含 DOT + 工厂 + 年份<br>日期与整车出厂日期相差太大 → 可能更换过（事故车证据）';
                    break;

                default:
                    output += '通用解释：将此编码与 VIN 出厂日期对比<br>正常：所有部件日期 ≤ VIN 年份 + 1 年<br>异常：某部件日期明显晚于整车 → 可能更换过（事故/翻新）';
                    break;
            }

            result.innerHTML = output;
        }
    </script>
</body>
</html>
